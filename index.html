<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FuhrparkPro - Fleet Management</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Password Protection Overlay -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-container">
            <div class="login-logo">
                <svg class="logo-icon" width="48" height="48" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="4" y="16" width="24" height="8" fill="currentColor"/>
                    <rect x="8" y="12" width="16" height="4" fill="currentColor"/>
                    <rect x="10" y="8" width="12" height="4" fill="currentColor"/>
                    <rect x="6" y="24" width="6" height="4" fill="currentColor"/>
                    <rect x="20" y="24" width="6" height="4" fill="currentColor"/>
                </svg>
                <h1>FuhrparkPro</h1>
            </div>
            <form id="loginForm" onsubmit="checkPassword(event)">
                <div class="login-input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="passwordInput" data-i18n-placeholder="login.passwordPlaceholder" placeholder="Enter password" required autofocus>
                </div>
                <button type="submit" class="btn btn-primary btn-full" data-i18n="login.submit">Login</button>
                <p class="login-error" id="loginError" data-i18n="login.error">Incorrect password</p>
            </form>
        </div>
    </div>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- 8-bit style sports car -->
                    <rect x="4" y="16" width="24" height="8" fill="currentColor"/>
                    <rect x="8" y="12" width="16" height="4" fill="currentColor"/>
                    <rect x="10" y="8" width="12" height="4" fill="currentColor"/>
                    <rect x="6" y="24" width="6" height="4" fill="currentColor"/>
                    <rect x="20" y="24" width="6" height="4" fill="currentColor"/>
                    <rect x="2" y="18" width="4" height="4" fill="currentColor"/>
                    <rect x="26" y="16" width="4" height="6" fill="currentColor"/>
                    <rect x="12" y="10" width="3" height="2" fill="#ffffff" opacity="0.6"/>
                    <rect x="17" y="10" width="3" height="2" fill="#ffffff" opacity="0.6"/>
                </svg>
                <span>FuhrparkPro</span>
            </div>
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span data-i18n="nav.dashboard">Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="vehicles">
                    <i class="fas fa-car"></i>
                    <span data-i18n="nav.vehicles">Vehicles</span>
                </a>
                <a href="#" class="nav-item" data-page="documents">
                    <i class="fas fa-folder-open"></i>
                    <span data-i18n="nav.documents">Documents</span>
                </a>
                <a href="#" class="nav-item" data-page="maintenance">
                    <i class="fas fa-wrench"></i>
                    <span data-i18n="nav.maintenance">Maintenance</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span data-i18n="nav.settings">Settings</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <p data-i18n="sidebar.localMode">Local Storage Mode</p>
                <small data-i18n="sidebar.dataSaved">Data saved locally</small>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" data-i18n-placeholder="header.search" placeholder="Search vehicles..." id="globalSearch">
                    </div>
                    <button class="btn btn-primary" id="addVehicleBtn">
                        <i class="fas fa-plus"></i>
                        <span data-i18n="header.addVehicle">Add Vehicle</span>
                    </button>
                </div>
            </header>

            <!-- Dashboard Page -->
            <section class="page active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalVehicles">0</h3>
                            <p data-i18n="dashboard.totalVehicles">Total Vehicles</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="activeVehicles">0</h3>
                            <p data-i18n="dashboard.active">Active</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="maintenanceVehicles">0</h3>
                            <p data-i18n="dashboard.inMaintenance">In Maintenance</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="alertsCount">0</h3>
                            <p data-i18n="dashboard.alerts">Alerts</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h2 data-i18n="dashboard.recentVehicles">Recent Vehicles</h2>
                            <a href="#" class="view-all" data-page="vehicles" data-i18n="dashboard.viewAll">View All</a>
                        </div>
                        <div class="card-body">
                            <div id="recentVehiclesList" class="vehicle-list-mini">
                                <p class="empty-state" data-i18n="dashboard.noVehicles">No vehicles added yet</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 data-i18n="dashboard.upcomingMaintenance">Upcoming Maintenance</h2>
                            <a href="#" class="view-all" data-page="maintenance" data-i18n="dashboard.viewAll">View All</a>
                        </div>
                        <div class="card-body">
                            <div id="upcomingMaintenance" class="maintenance-list-mini">
                                <p class="empty-state" data-i18n="dashboard.noMaintenance">No maintenance scheduled</p>
                            </div>
                        </div>
                    </div>

                    <div class="card full-width">
                        <div class="card-header">
                            <h2 data-i18n="dashboard.fleetByStatus">Fleet by Status</h2>
                        </div>
                        <div class="card-body">
                            <div class="status-chart" id="statusChart">
                                <div class="chart-placeholder">
                                    <i class="fas fa-chart-pie"></i>
                                    <p data-i18n="dashboard.addVehiclesStats">Add vehicles to see statistics</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Vehicles Page -->
            <section class="page" id="vehicles">
                <div class="page-actions">
                    <div class="filters">
                        <select id="statusFilter" class="filter-select">
                            <option value="" data-i18n="vehicles.allStatus">All Status</option>
                            <option value="active" data-i18n="vehicles.active">Active</option>
                            <option value="maintenance" data-i18n="vehicles.inMaintenance">In Maintenance</option>
                            <option value="inactive" data-i18n="vehicles.inactive">Inactive</option>
                        </select>
                        <select id="typeFilter" class="filter-select">
                            <option value="" data-i18n="vehicles.allTypes">All Types</option>
                            <option value="car" data-i18n="vehicles.car">Car</option>
                            <option value="truck" data-i18n="vehicles.truck">Truck</option>
                            <option value="van" data-i18n="vehicles.van">Van</option>
                            <option value="motorcycle" data-i18n="vehicles.motorcycle">Motorcycle</option>
                        </select>
                    </div>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>

                <div id="vehiclesContainer" class="vehicles-grid">
                    <div class="empty-state-large">
                        <i class="fas fa-car"></i>
                        <h3 data-i18n="vehicles.noVehicles">No vehicles yet</h3>
                        <p data-i18n="vehicles.addFirst">Add your first vehicle to get started</p>
                        <button class="btn btn-primary" onclick="openVehicleModal()">
                            <i class="fas fa-plus"></i> <span data-i18n="vehicles.addVehicle">Add Vehicle</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Documents Page -->
            <section class="page" id="documents">
                <div class="page-actions">
                    <div class="filters">
                        <select id="docVehicleFilter" class="filter-select">
                            <option value="" data-i18n="documents.allVehicles">All Vehicles</option>
                        </select>
                        <select id="docTypeFilter" class="filter-select">
                            <option value="" data-i18n="documents.allTypes">All Types</option>
                            <option value="registration" data-i18n="documents.registration">Registration</option>
                            <option value="insurance" data-i18n="documents.insurance">Insurance</option>
                            <option value="inspection" data-i18n="documents.inspection">Inspection</option>
                            <option value="receipt" data-i18n="documents.receipt">Receipt</option>
                            <option value="other" data-i18n="documents.other">Other</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="openDocumentModal()">
                        <i class="fas fa-upload"></i> <span data-i18n="documents.upload">Upload Document</span>
                    </button>
                </div>

                <div id="documentsContainer" class="documents-grid">
                    <div class="empty-state-large">
                        <i class="fas fa-folder-open"></i>
                        <h3 data-i18n="documents.noDocuments">No documents yet</h3>
                        <p data-i18n="documents.uploadFirst">Upload documents for your vehicles</p>
                        <button class="btn btn-primary" onclick="openDocumentModal()">
                            <i class="fas fa-upload"></i> <span data-i18n="documents.upload">Upload Document</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Maintenance Page -->
            <section class="page" id="maintenance">
                <div class="page-actions">
                    <div class="filters">
                        <select id="maintVehicleFilter" class="filter-select">
                            <option value="" data-i18n="documents.allVehicles">All Vehicles</option>
                        </select>
                        <select id="maintStatusFilter" class="filter-select">
                            <option value="" data-i18n="maintenance.allStatus">All Status</option>
                            <option value="scheduled" data-i18n="maintenance.scheduled">Scheduled</option>
                            <option value="in-progress" data-i18n="maintenance.inProgress">In Progress</option>
                            <option value="completed" data-i18n="maintenance.completed">Completed</option>
                            <option value="overdue" data-i18n="maintenance.overdue">Overdue</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="openMaintenanceModal()">
                        <i class="fas fa-plus"></i> <span data-i18n="maintenance.schedule">Schedule Maintenance</span>
                    </button>
                </div>

                <div id="maintenanceContainer" class="maintenance-list">
                    <div class="empty-state-large">
                        <i class="fas fa-wrench"></i>
                        <h3 data-i18n="maintenance.noRecords">No maintenance records</h3>
                        <p data-i18n="maintenance.scheduleFirst">Schedule maintenance for your vehicles</p>
                        <button class="btn btn-primary" onclick="openMaintenanceModal()">
                            <i class="fas fa-plus"></i> <span data-i18n="maintenance.schedule">Schedule Maintenance</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Settings Page -->
            <section class="page" id="settings">
                <div class="settings-container">
                    <div class="card">
                        <div class="card-header">
                            <h2 data-i18n="settings.dataManagement">Data Management</h2>
                        </div>
                        <div class="card-body">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.exportData">Export Data</h4>
                                    <p data-i18n="settings.exportDesc">Download all your fleet data as JSON</p>
                                </div>
                                <button class="btn btn-secondary" onclick="exportData()">
                                    <i class="fas fa-download"></i> <span data-i18n="settings.export">Export</span>
                                </button>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.importData">Import Data</h4>
                                    <p data-i18n="settings.importDesc">Restore data from a backup file</p>
                                </div>
                                <label class="btn btn-secondary">
                                    <i class="fas fa-upload"></i> <span data-i18n="settings.import">Import</span>
                                    <input type="file" id="importFile" accept=".json" hidden onchange="importData(event)">
                                </label>
                            </div>
                            <div class="setting-item danger">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.clearData">Clear All Data</h4>
                                    <p data-i18n="settings.clearDesc">Permanently delete all fleet data</p>
                                </div>
                                <button class="btn btn-danger" onclick="clearAllData()">
                                    <i class="fas fa-trash"></i> <span data-i18n="settings.clear">Clear Data</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 data-i18n="settings.avrios">Avrios Import</h2>
                        </div>
                        <div class="card-body">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.avriosImport">Import from Avrios</h4>
                                    <p data-i18n="settings.avriosImportDesc">Import vehicles from an Avrios CSV export file</p>
                                </div>
                                <label class="btn btn-primary">
                                    <i class="fas fa-file-csv"></i> <span data-i18n="settings.avriosSelectFile">Select CSV</span>
                                    <input type="file" id="avriosImportFile" accept=".csv" hidden onchange="importFromAvrios(event)">
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <p class="text-muted" data-i18n="settings.avriosHint">Export your vehicles from Avrios as CSV, then upload here. Supported fields: License Plate, Make, Model, Year, VIN, Mileage, Fuel Type.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 data-i18n="settings.displaySettings">Display Settings</h2>
                        </div>
                        <div class="card-body">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.language">Language</h4>
                                    <p data-i18n="settings.languageDesc">Choose your preferred language</p>
                                </div>
                                <select id="languageSelect" class="filter-select" onchange="setLanguage(this.value)">
                                    <option value="en">English</option>
                                    <option value="de">Deutsch</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.theme">Theme</h4>
                                    <p data-i18n="settings.themeDesc">Choose your preferred color scheme</p>
                                </div>
                                <select id="themeSelect" class="filter-select" onchange="setTheme(this.value)">
                                    <option value="light" data-i18n="settings.light">Light</option>
                                    <option value="dark" data-i18n="settings.dark">Dark</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.currency">Currency</h4>
                                    <p data-i18n="settings.currencyDesc">Set your preferred currency</p>
                                </div>
                                <select id="currencySelect" class="filter-select" onchange="setCurrency(this.value)">
                                    <option value="EUR">EUR (€)</option>
                                    <option value="USD">USD ($)</option>
                                    <option value="GBP">GBP (£)</option>
                                    <option value="CHF">CHF (Fr.)</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4 data-i18n="settings.distance">Distance Unit</h4>
                                    <p data-i18n="settings.distanceDesc">Set your preferred distance unit</p>
                                </div>
                                <select id="distanceSelect" class="filter-select" onchange="setDistanceUnit(this.value)">
                                    <option value="km" data-i18n="settings.kilometers">Kilometers (km)</option>
                                    <option value="mi" data-i18n="settings.miles">Miles (mi)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 data-i18n="settings.about">About</h2>
                        </div>
                        <div class="card-body">
                            <div class="about-info">
                                <h4>FuhrparkPro</h4>
                                <p data-i18n="settings.version">Version 1.0.0</p>
                                <p data-i18n="settings.description">A modern fleet management solution</p>
                                <p class="storage-info">
                                    <i class="fas fa-database"></i>
                                    <span data-i18n="settings.storageUsed">Storage used</span>: <span id="storageUsed">0 KB</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Vehicle Modal -->
    <div class="modal" id="vehicleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="vehicleModalTitle" data-i18n="vehicleModal.addTitle">Add New Vehicle</h2>
                <button class="close-btn" onclick="closeVehicleModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="vehicleForm" onsubmit="saveVehicle(event)">
                <input type="hidden" id="vehicleId">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="licensePlate" data-i18n="vehicleModal.licensePlate">License Plate</label> *
                        <input type="text" id="licensePlate" required placeholder="e.g., B-AB 1234">
                    </div>
                    <div class="form-group">
                        <label for="vehicleType" data-i18n="vehicleModal.vehicleType">Vehicle Type</label> *
                        <select id="vehicleType" required>
                            <option value="" data-i18n="vehicleModal.selectType">Select type</option>
                            <option value="car" data-i18n="vehicles.car">Car</option>
                            <option value="truck" data-i18n="vehicles.truck">Truck</option>
                            <option value="van" data-i18n="vehicles.van">Van</option>
                            <option value="motorcycle" data-i18n="vehicles.motorcycle">Motorcycle</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="make" data-i18n="vehicleModal.make">Make</label> *
                        <input type="text" id="make" required placeholder="e.g., Volkswagen">
                    </div>
                    <div class="form-group">
                        <label for="model" data-i18n="vehicleModal.model">Model</label> *
                        <input type="text" id="model" required placeholder="e.g., Golf">
                    </div>
                    <div class="form-group">
                        <label for="year" data-i18n="vehicleModal.year">Year</label> *
                        <input type="number" id="year" required min="1900" max="2030" placeholder="e.g., 2023">
                    </div>
                    <div class="form-group">
                        <label for="color" data-i18n="vehicleModal.color">Color</label>
                        <input type="text" id="color" placeholder="e.g., Silver">
                    </div>
                    <div class="form-group">
                        <label for="vin" data-i18n="vehicleModal.vin">VIN</label>
                        <input type="text" id="vin" data-i18n-placeholder="vehicleModal.vinPlaceholder" placeholder="Vehicle Identification Number">
                    </div>
                    <div class="form-group">
                        <label for="mileage" data-i18n="vehicleModal.mileage">Current Mileage</label>
                        <input type="number" id="mileage" min="0" placeholder="e.g., 50000">
                    </div>
                    <div class="form-group">
                        <label for="fuelType" data-i18n="vehicleModal.fuelType">Fuel Type</label>
                        <select id="fuelType">
                            <option value="" data-i18n="vehicleModal.selectFuel">Select fuel type</option>
                            <option value="petrol" data-i18n="vehicleModal.petrol">Petrol</option>
                            <option value="diesel" data-i18n="vehicleModal.diesel">Diesel</option>
                            <option value="electric" data-i18n="vehicleModal.electric">Electric</option>
                            <option value="hybrid" data-i18n="vehicleModal.hybrid">Hybrid</option>
                            <option value="lpg" data-i18n="vehicleModal.lpg">LPG</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="vehicleStatus" data-i18n="vehicleModal.status">Status</label>
                        <select id="vehicleStatus">
                            <option value="active" data-i18n="vehicles.active">Active</option>
                            <option value="maintenance" data-i18n="vehicles.inMaintenance">In Maintenance</option>
                            <option value="inactive" data-i18n="vehicles.inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="purchaseDate" data-i18n="vehicleModal.purchaseDate">Purchase Date</label>
                        <input type="date" id="purchaseDate">
                    </div>
                    <div class="form-group">
                        <label for="purchasePrice" data-i18n="vehicleModal.purchasePrice">Purchase Price</label>
                        <input type="number" id="purchasePrice" min="0" step="0.01" placeholder="e.g., 25000">
                    </div>
                    <div class="form-group">
                        <label for="insuranceExpiry" data-i18n="vehicleModal.insuranceExpiry">Insurance Expiry</label>
                        <input type="date" id="insuranceExpiry">
                    </div>
                    <div class="form-group">
                        <label for="inspectionExpiry" data-i18n="vehicleModal.inspectionExpiry">Inspection Expiry (TÜV)</label>
                        <input type="date" id="inspectionExpiry">
                    </div>
                    <div class="form-group full-width">
                        <label for="notes" data-i18n="vehicleModal.notes">Notes</label>
                        <textarea id="notes" rows="3" data-i18n-placeholder="vehicleModal.notesPlaceholder" placeholder="Additional notes about the vehicle"></textarea>
                    </div>
                    <div class="form-group full-width">
                        <label for="vehicleImage" data-i18n="vehicleModal.image">Vehicle Image</label>
                        <div class="image-upload">
                            <input type="file" id="vehicleImage" accept="image/*" onchange="previewImage(event)">
                            <div class="image-preview" id="imagePreview">
                                <i class="fas fa-camera"></i>
                                <span data-i18n="vehicleModal.uploadImage">Click to upload image</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeVehicleModal()" data-i18n="vehicleModal.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-i18n="vehicleModal.save">Save Vehicle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Document Modal -->
    <div class="modal" id="documentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="documentModal.title">Upload Document</h2>
                <button class="close-btn" onclick="closeDocumentModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="documentForm" onsubmit="saveDocument(event)">
                <input type="hidden" id="documentId">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="docVehicle" data-i18n="documentModal.vehicle">Vehicle</label> *
                        <select id="docVehicle" required>
                            <option value="" data-i18n="documentModal.selectVehicle">Select vehicle</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="docType" data-i18n="documentModal.type">Document Type</label> *
                        <select id="docType" required>
                            <option value="" data-i18n="documentModal.selectType">Select type</option>
                            <option value="registration" data-i18n="documents.registration">Registration</option>
                            <option value="insurance" data-i18n="documents.insurance">Insurance</option>
                            <option value="inspection" data-i18n="documents.inspectionCertificate">Inspection Certificate</option>
                            <option value="receipt" data-i18n="documents.receiptInvoice">Receipt/Invoice</option>
                            <option value="other" data-i18n="documents.other">Other</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="docName" data-i18n="documentModal.name">Document Name</label> *
                        <input type="text" id="docName" required placeholder="e.g., Insurance Policy 2024">
                    </div>
                    <div class="form-group">
                        <label for="docDate" data-i18n="documentModal.date">Document Date</label>
                        <input type="date" id="docDate">
                    </div>
                    <div class="form-group">
                        <label for="docExpiry" data-i18n="documentModal.expiry">Expiry Date</label>
                        <input type="date" id="docExpiry">
                    </div>
                    <div class="form-group full-width">
                        <label for="docFile" data-i18n="documentModal.file">File</label> *
                        <div class="file-upload">
                            <input type="file" id="docFile" required onchange="previewDocument(event)">
                            <div class="file-preview" id="filePreview">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span data-i18n="documents.selectFile">Click to select file</span>
                                <small data-i18n="documents.fileTypes">PDF, Images, or Documents</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="docNotes" data-i18n="documentModal.notes">Notes</label>
                        <textarea id="docNotes" rows="2" data-i18n-placeholder="documentModal.notesPlaceholder" placeholder="Additional notes"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeDocumentModal()" data-i18n="documentModal.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-i18n="documentModal.save">Save Document</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Maintenance Modal -->
    <div class="modal" id="maintenanceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="maintenanceModalTitle" data-i18n="maintenanceModal.addTitle">Schedule Maintenance</h2>
                <button class="close-btn" onclick="closeMaintenanceModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="maintenanceForm" onsubmit="saveMaintenance(event)">
                <input type="hidden" id="maintenanceId">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="maintVehicle" data-i18n="maintenanceModal.vehicle">Vehicle</label> *
                        <select id="maintVehicle" required>
                            <option value="" data-i18n="maintenanceModal.selectVehicle">Select vehicle</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maintType" data-i18n="maintenanceModal.type">Maintenance Type</label> *
                        <select id="maintType" required>
                            <option value="" data-i18n="maintenanceModal.selectType">Select type</option>
                            <option value="oil-change" data-i18n="maintType.oil-change">Oil Change</option>
                            <option value="tire-rotation" data-i18n="maintType.tire-rotation">Tire Rotation</option>
                            <option value="brake-service" data-i18n="maintType.brake-service">Brake Service</option>
                            <option value="inspection" data-i18n="maintType.inspection">General Inspection</option>
                            <option value="tuv" data-i18n="maintType.tuv">TÜV/Safety Inspection</option>
                            <option value="repair" data-i18n="maintType.repair">Repair</option>
                            <option value="other" data-i18n="maintType.other">Other</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="maintDescription" data-i18n="maintenanceModal.description">Description</label> *
                        <input type="text" id="maintDescription" required placeholder="e.g., Regular oil change">
                    </div>
                    <div class="form-group">
                        <label for="maintDate" data-i18n="maintenanceModal.scheduledDate">Scheduled Date</label> *
                        <input type="date" id="maintDate" required>
                    </div>
                    <div class="form-group">
                        <label for="maintStatus" data-i18n="maintenanceModal.status">Status</label>
                        <select id="maintStatus">
                            <option value="scheduled" data-i18n="maintenance.scheduled">Scheduled</option>
                            <option value="in-progress" data-i18n="maintenance.inProgress">In Progress</option>
                            <option value="completed" data-i18n="maintenance.completed">Completed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maintMileage" data-i18n="maintenanceModal.mileage">Mileage at Service</label>
                        <input type="number" id="maintMileage" min="0" data-i18n-placeholder="maintenanceModal.mileagePlaceholder" placeholder="Current mileage">
                    </div>
                    <div class="form-group">
                        <label for="maintCost" data-i18n="maintenanceModal.cost">Cost</label>
                        <input type="number" id="maintCost" min="0" step="0.01" placeholder="e.g., 150.00">
                    </div>
                    <div class="form-group full-width">
                        <label for="maintProvider" data-i18n="maintenanceModal.provider">Service Provider</label>
                        <input type="text" id="maintProvider" placeholder="e.g., AutoService GmbH">
                    </div>
                    <div class="form-group full-width">
                        <label for="maintNotes" data-i18n="maintenanceModal.notes">Notes</label>
                        <textarea id="maintNotes" rows="2" data-i18n-placeholder="maintenanceModal.notesPlaceholder" placeholder="Additional notes"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeMaintenanceModal()" data-i18n="maintenanceModal.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-i18n="maintenanceModal.save">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Vehicle Detail Modal -->
    <div class="modal" id="vehicleDetailModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="vehicleDetailTitle" data-i18n="vehicleDetail.title">Vehicle Details</h2>
                <button class="close-btn" onclick="closeVehicleDetailModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="vehicle-detail-content" id="vehicleDetailContent">
                <!-- Content populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Confirm Dialog -->
    <div class="modal" id="confirmModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="confirmTitle" data-i18n="confirm.title">Confirm Action</h2>
                <button class="close-btn" onclick="closeConfirmModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="confirm-body">
                <p id="confirmMessage" data-i18n="confirm.message">Are you sure you want to proceed?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeConfirmModal()" data-i18n="confirm.cancel">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmBtn" data-i18n="confirm.confirm">Confirm</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
